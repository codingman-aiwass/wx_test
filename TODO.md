1. 第一次进入小程序，可能会有权限请求弹窗。以下为最基本的位置信息请求界面。可能还会有其他请求弹窗，比如优惠券通知提醒这种的。常见于付费购买物品以后
需要想办法点击允许/同意处理掉

发现：
1. 在最近使用界面，是可以通过wx.navigateToMiniProgram前往想要去的小程序的
2. 但是如果从小程序内部通过press_keycode退出来以后，没有办法通过wx.navigateToMiniProgram前往想要去的小程序，只能通过获取最近使用页面

1. 进入小程序时，可能会有倒计时类型的广告，需要点击跳过
2. **有的小程序进入以后会有广告弹窗，不点击掉则无法点击其他组件**。一种解决方法：观察当前webview界面中所有的组件的z-index，以此判断是否有组件覆盖在其他组件之上。有的话就说明存在弹窗 https://blog.51cto.com/haibo0668/5505488 
3. 有的小程序的页面比较长， 部分组件需要下滑以后才能点击到。但是将xpath路径转化为坐标以后就没法点击到这部分组件。
4. 不知道会不会有可能在遍历小程序的过程中出现权限请求弹窗。有没有一种办法能够在遍历小程序之前就同意所有权限请求？ --- 在进入一个新页面，点击之前先判断有没有弹窗，有就处理，没有就继续点击
5. 在进入首页之前，先检查隐私政策，点击掉隐私政策以后再检查广告弹窗
6. 广告弹窗种类多样，亚马逊的广告弹窗在源码里有wx-popup，但是麦当劳的没有

程序执行流程
1. 启动微信，点击发现，点击小程序，进入最近使用界面，方便在不小心退出小程序时自动回到刚刚退出的小程序。
2. 检查微信是否只有NATIVE_APP模式，如果只有这一种模式，kill微信并执行第一步
3. 通过appID启动指定小程序(TODO)(目前想到的实现方法：自己写一个小程序，里面只写跳转API，然后在动态测试目标小程序时，如果不慎退出，点击最近使用的小程序以回到原来的小程序)
4. 进入小程序以后，首先检查是否有广告（5s，可通过点击跳过进入）（TODO）
5. 检查是否有隐私政策界面，有则同意（有的小程序的隐私政策弹窗不在xml中，在webview里，比如掌上公交）
6. 检查是否有位置权限请求界面，有则同意
7. 检查是否有普通弹窗，比如通知类弹窗，底下有 类似我知道了 字样
8. 检查是否有广告弹窗（TODO），有则关闭
9. 获取小程序NATIVE_APP模式下的xml，获取该页面所有组件的坐标

[//]: # (8. 在执行点击之前，判断是否有广告弹窗/权限请求)
1. 根据坐标执行点击，点击后需要检查是否进入新页面，每进入一个新页面就将该新页面URL以及请求参数就添加到待跳转队列中。并判断该页面是否有弹窗/权限请求，有的话处理掉再然后回退到原页面，然后继续点击
2. 点击完一层以后，从刚才的新页面队列中取出新的页面URL以及请求参数，跳转到该页面，并重复执行7-9步

TODO 需要判断在点击途中是否误入了其他小程序，是的话也得退出
TODO 如果进入了选择城市界面，就直接随便挑选一个，不要在这里浪费太多时间，
TODO 进入的第一个正常界面中含有登录，是否需要登录。或者在点击组件后跳转到登录界面
如果进入登录界面的话，需要选择手机好快捷登录并打上底下同意隐私政策的勾

另一个探索内容：判断在分享群聊以后，小程序能否拿到群聊ID信息。
思考：如何确定要找的小程序类型；如何判断是否分享了ID信息，通过抓包还是静态代码分析。