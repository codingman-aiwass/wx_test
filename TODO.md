发现：
1. 在最近使用界面，是可以通过wx.navigateToMiniProgram前往想要去的小程序的
2. 但是如果从小程序内部通过press_keycode退出来以后，没有办法通过wx.navigateToMiniProgram前往想要去的小程序，只能通过进入获取最近使用小程序页面，通过点击最顶部小程序回去。但如果是通过wx.navigateToMiniProgram进入的小程序，刚退出来的时候在这个页面也看不到。考虑不使用press_keycode返回上一级，改用其他方法

1. 进入小程序时，可能会有倒计时类型的广告，需要点击跳过
2. **有的小程序进入以后会有广告弹窗，不点击掉则无法点击其他组件**。一种解决方法：观察当前webview界面中所有的组件的z-index，以此判断是否有组件覆盖在其他组件之上。有的话就说明存在弹窗 https://blog.51cto.com/haibo0668/5505488 。但是观察了麦的html源码，似乎不能根据以上特征进行匹配
3. 有的小程序的页面比较长， 部分组件需要下滑以后才能点击到。但是将xpath路径转化为坐标以后就没法点击到这部分组件。
4. 不知道会不会有可能在遍历小程序的过程中出现权限请求弹窗。有没有一种办法能够在遍历小程序之前就同意所有权限请求？ --- 在进入一个新页面，点击之前先判断有没有弹窗，有就处理，没有就继续点击
5. 在进入首页之前，先检查隐私政策，点击掉隐私政策以后再检查广告弹窗
6. 广告弹窗种类多样，亚马逊的广告弹窗在源码里有wx-popup，但是麦当劳的没有

程序执行流程
1. 启动微信，点击发现，点击小程序，进入最近使用界面，方便在不小心退出小程序时自动回到刚刚退出的小程序以及通过wx.navigateToMiniProgram跳转进入指定的小程序
2. 检查微信是否只有NATIVE_APP模式，如果只有这一种模式，kill微信并执行第一步
3. 通过appID启动指定小程序
4. 进入小程序以后，等待几秒钟，确保首页广告(5s跳过那种)被跳过
5. 检查是否有隐私政策界面，有则同意（有的小程序的隐私政策弹窗不在xml中，在webview里，比如掌上公交）
6. 检查是否有位置权限请求界面，有则同意
7. 检查是否有普通弹窗，比如通知类弹窗，底下有 类似我知道了 字样(TODO,目前测试的小程序还没有出现这类情况)
8. 检查是否有广告弹窗，有则关闭（TODO）
9. 获取小程序NATIVE_APP模式下的xml，获取该页面所有组件的坐标/获取小程序webview状态下的源码，遍历所有组件，获取xpath路径，并通过find_element().click()点击(TODO)
10. 如果是第一次点击小程序的首页内容，有可能会触发登录账号界面，例如菜鸟，会在点击之后强制跳转页面到登录页面，也需等待数秒。**考虑在首页寻找登录按钮，先登录再进行遍历**(TODO)。也有可能会直接进入**选择城市页面**，需要直接点击一个通过，不需要遍历所有城市(TODO)
11. 在点击过程中，可能会进入其他小程序，也需要判断并回退到原来的小程序(TODO)
12. 执行点击操作后，检查是否进入新页面，每进入一个新页面就将该新页面URL以及请求参数就添加到待跳转队列中。并判断该页面是否有弹窗/权限请求，有的话处理掉再然后回退到原页面.(TODO,但是如果这么做，等待弹窗出现可能需要花费1-2s，有点耗时)
13. 回到上一级页面，判断是否出现弹窗/权限请求，有的话处理掉再然后回退到原页面.(TODO,但是如果这么做，等待弹窗出现可能需要花费1-2s，有点耗时)
14. 点击完点击完一层以后，从刚才的新页面队列中取出新的页面URL以及请求参数，跳转到该页面，并重复执行7-11步(TODO)



如果进入登录界面的话，需要选择手机好快捷登录并打上底下同意隐私政策的单选框。后续还需要优化一下之前点击掉隐私政策页面的逻辑，还需要加入对单选框的支持。
考虑 尝试在webview模式下能否获取所有可点击组件,并尝试根据解析html信息获取所有的可点击组件坐标
考虑 在进入首页，开始点击之前，稍等片刻，因为弹窗或许会出现
为了使得程序更加健壮，考虑可能还需要进行点击后稍等片刻，使得界面完全加载。防止出现页面还没加载完就开始点击，以至于点不到东西的情况发生
考虑在检测到小程序进入相机界面时，使用滑动手势退出

发现：html源码中似乎能够保存整个页面的信息。如果可以在遍历的过程中记录所有的xpath或者id，然后使用click(),应该能全部点击到。有的小程序在获取到的源码中，组件含有类似 data-appium-inspector-x="33" data-appium-inspector-y="1656" 的信息，后期考虑利用该信息进行直接点击.目前推测这类信息

另一个探索内容：判断在分享群聊以后，小程序能否拿到群聊ID信息。
思考：如何确定要找的小程序类型；如何判断是否分享了ID信息，通过抓包还是静态代码分析。